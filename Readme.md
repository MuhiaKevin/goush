# GOUSH (Golang url shortener)
https://www.calhoun.io/updating-and-deleting-postgresql-records-using-gos-sql-package/
https://www.sql-easy.com/learn/how-to-delete-a-row-in-sql/
https://www.usegolang.com/

Routes 

- [x] GET /   => View all links
- [x] GET /links/create    => Page create a link
- [x] POST /links/create    => path to create a link
- [x] GET /link/:shortlink => get Full url
- [x] DELETE /links/delete/:shortlink    => delete a shortlink


### Models 

Short url {
    Title string,
    url string,
    shortlink,
    expiration date, // optional
}

### Future 
1. Can create,retrieve and delete links
2. Users can create,retrieve and delete their own links
3. Add admin panel to manage users

### docker commands
docker exec -it mysql  mysql -D goush -u root -p -> Login to mysql as root
docker exec -it mysql  mysql -D goush -u web -p -> Login to mysql as web





-- Table to store information about shortened URLs
CREATE TABLE ShortenedURLs (
    id INTEGER PRIMARY KEY,
    short_code VARCHAR(10) NOT NULL,
    original_url TEXT NOT NULL,
    creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expiration_date TIMESTAMP,  -- You might add this if you want URLs to expire
    hits INTEGER DEFAULT 0  -- Number of times the short URL has been accessed
);

-- Table to store user accounts (optional, if you want to implement user-specific short URLs)
CREATE TABLE Users (
    user_id INTEGER PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL  -- Store hashed passwords for security
);

-- Table to store analytics or access logs (optional)
CREATE TABLE AccessLogs (
    log_id INTEGER PRIMARY KEY,
    url_id INTEGER,
    access_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    user_agent TEXT,  -- Store information about the accessing user agent
    FOREIGN KEY (url_id) REFERENCES ShortenedURLs(id)
);






-- Table to store information about long URLs
CREATE TABLE LongUrls (
    url_id INT AUTO_INCREMENT PRIMARY KEY,
    original_url VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table to store information about short URLs and their association with long URLs
CREATE TABLE ShortUrls (
    short_id INT AUTO_INCREMENT PRIMARY KEY,
    short_key VARCHAR(10) NOT NULL,
    url_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (url_id) REFERENCES LongUrls(url_id)
);




    The LongUrls table is used to store information about the original long URLs. It includes a unique identifier (url_id), the original URL (original_url), and the timestamp when the URL was created (created_at).

    The ShortUrls table is used to store information about the short URLs generated by the URL shortener service. It includes a unique identifier for the short URL (short_id), the short key used in the short URL (short_key), the corresponding url_id linking it to the original URL in the LongUrls table, and the timestamp when the short URL was created (created_at). The url_id column is a foreign key referencing the url_id column in the LongUrls table, establishing a relationship between the long and short URLs.

You can customize the table structures based on your specific requirements. Additionally, consider adding features such as user accounts, click tracking, expiration dates, and analytics based on your service's needs.
